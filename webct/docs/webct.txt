webct Module
============

<!--
	This file is written in Markdown syntax.
	For more information about how to use the Markdown syntax, read here:
	http://daringfireball.net/projects/markdown/syntax
-->

  * Version: `$Id$`
  * Author: Ernesto Revilla <erny@yaco.es>, Yaco Sistemas
  * Package: simpleSAMLphp

This module provides a bridge between simpleSAMLphp and Blackboard/WebCT with
the following features:
 - Single Sign-On
 - User provisioning
 - Course (section) enrollments (activate and deny access)


`webct`
: simpleSAMLphp Blackboard/WebCT bridge


`webct`
-------

To connect simpleSAMLphp to BB/WebCT follow these steps:
 * Install and configure simpleSAMLphp >= 1.5
 * Download this module and place it in you simpleSAMLphp's module dir.
 * Copy config-templates/module_webct.php to the simpleSAMLphp's config dir.
 * Edit module_webct.php to suite your needs.

Once configured correctly, direct your browser to the base URL
of SimpleSAMLphp. There should appear a link in the Welcome tab
which enables login to BB/WebCT. This link points to:

http://<sp-host>/<simplesamlphp deploy path>/module.php/webct/login.php

Add this link wherever you want, e.g. to the WebCT entry page or
another web page.


Customize the connector
-----------------------
To customize, inherit and override methods:
class MyWebCT_Connector extends sspmod_webct_Connector {
  ...
  override methods
  ...
}
$webct = new MyWebCT_Connector;
$webct->main();


How to configure Single Logout
------------------------------
You have to customize the logout page of BB/WebCT. This can be done in the following way:

1. Login as admin to WebCT

2. Goto "Content Manager" tab -> "System files"

3. Create a new file with a name like "customLogout" or something else, with the following content:
   <html>
   <head>
   <script>
   <!--
   window.location="http://sp.example.com/simplesaml/module.php/webct/logout.php";
   -->
   </script>
   </head>
   <body>
   Logout
   </body>
   </html>

4. Once saved, go to the action (drop down) menu and select "View file info".
   A popup shows the basic data. Copy and paste the Id numner (or write it down.)
   Close the window.

5. Goto Administration | Utilities | Settings and select "Branding" in the
   Administration column. 

6. In the Branding Administration Screen, set:
   - "Use Learning System logout screen" to false
   - "Custom logout screen using file content ID" to the value copied in step 4. 
   Save values, you're done in WebCT.

7. In simpleSAMLphp webct config file (config/module_webct.php), 
   set 'logout_redirect_url' to the URL the browser should be
   redirected at the end of the logout process. Keep in mind
   that the URL will be used for both, native WebCT logout
   and simpleSAML Single Logout.


About BB/WebCT
--------------
More about Blackboard/Vista 8 and this module:
 - BB/WebCT Vista/CE 8.0:
   - uses Oracle/BEA Weblogic Server 9.2 which has no support for SAML 2. 
     Oracle Weblogic has support for SAML 2 since version 10.3.
   - has an automatic sign-on protocol which uses Message Authn Codes
   - has integration an API, called "System Integration API" (SIAPI). This
     module uses 2 apdapters called 'IMS Adapter' and 'Standard Adapter'.
   - Single Sign-On uses 'Standard Adapter' to check the validity of a
     user id and return a global SSO user id.
 - The connector has been developed as module because it's easier 
   to deploy.

TODO:
 - update user data (name, email) when logging in
 - enrollment: if status 'inactive', delete enrollment (config option), instead of lock
 - more docs
 - Asserts of config at __construct time
 - Translate messages.
 - The course code mapping is loaded for each user. Is it possible to
   share it? (e.g. memcached, etc.)
*/

